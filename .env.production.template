# ============================================
# mPanel Production Environment Configuration
# ============================================
# IMPORTANT: Replace ALL placeholder values before deploying
# Generated: November 14, 2025

# ============================================
# APPLICATION SETTINGS
# ============================================
NODE_ENV=production
PORT=3000
API_VERSION=v1
FRONTEND_URL=https://panel.yourdomain.com
CORS_ORIGIN=https://panel.yourdomain.com

# ============================================
# DATABASE - PostgreSQL
# ============================================
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# REPLACE: mpanel_prod_user, SECURE_DB_PASSWORD_HERE, your-db-host
DATABASE_URL=postgresql://mpanel_prod_user:SECURE_DB_PASSWORD_HERE@your-db-host:5432/mpanel_production
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20

# ============================================
# REDIS CACHE
# ============================================
# Format: redis://[:PASSWORD@]HOST:PORT[/DATABASE]
# REPLACE: your-redis-host
REDIS_URL=redis://your-redis-host:6379/0
REDIS_SESSION_TTL=604800

# ============================================
# OBJECT STORAGE - MinIO/S3
# ============================================
# REPLACE: your-minio-host, MINIO_ACCESS_KEY, MINIO_SECRET_KEY
MINIO_ENDPOINT=your-minio-host
MINIO_PORT=9000
MINIO_USE_SSL=true
MINIO_ACCESS_KEY=REPLACE_WITH_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=REPLACE_WITH_MINIO_SECRET_KEY
MINIO_BUCKET=mpanel-production

# ============================================
# SECURITY - JWT & ENCRYPTION
# ============================================
# CRITICAL: Generate secure random strings (64+ characters)
# Generate with: openssl rand -base64 64
JWT_SECRET=REPLACE_WITH_SECURE_RANDOM_STRING_MIN_64_CHARS
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Generate with: openssl rand -base64 32 | head -c 32
ENCRYPTION_KEY=REPLACE_WITH_32_CHAR_ENCRYPTION_KEY

# API Token for provisioning webhooks (match with landing site)
# Generate with: openssl rand -hex 32
MPANEL_API_TOKEN=REPLACE_WITH_SECURE_API_TOKEN

# ============================================
# STRIPE PAYMENT (LIVE KEYS)
# ============================================
# Get from: https://dashboard.stripe.com/apikeys
# CRITICAL: Use LIVE keys (sk_live_..., pk_live_...)
STRIPE_SECRET_KEY=sk_live_REPLACE_WITH_YOUR_STRIPE_SECRET_KEY
STRIPE_PUBLISHABLE_KEY=pk_live_REPLACE_WITH_YOUR_STRIPE_PUBLISHABLE_KEY
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_REPLACE_WITH_YOUR_WEBHOOK_SECRET

# ============================================
# TAX & ICANN CONFIGURATION
# ============================================
TAX_ENABLED=true
DEFAULT_TAX_RATE=0.10
ICANN_ENABLED=true
ICANN_FEE_PER_YEAR=0.18

# ============================================
# EMAIL NOTIFICATIONS
# ============================================
# Provider options: 'smtp', 'sendgrid', 'mailgun'
EMAIL_PROVIDER=smtp
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=mPanel

# SMTP Configuration (recommended: Gmail, SendGrid SMTP, AWS SES)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=REPLACE_WITH_YOUR_EMAIL
SMTP_PASS=REPLACE_WITH_APP_PASSWORD

# Alternative: SendGrid (uncomment if using)
# EMAIL_PROVIDER=sendgrid
# SENDGRID_API_KEY=SG.REPLACE_WITH_SENDGRID_API_KEY

# Alternative: Mailgun (uncomment if using)
# EMAIL_PROVIDER=mailgun
# MAILGUN_API_KEY=key-REPLACE_WITH_MAILGUN_API_KEY
# MAILGUN_DOMAIN=mg.yourdomain.com

# ============================================
# AI FEATURES - OpenAI GPT-4
# ============================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-REPLACE_WITH_YOUR_OPENAI_API_KEY
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# ============================================
# MONITORING & OBSERVABILITY
# ============================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
LOKI_URL=http://localhost:3100
GRAFANA_ADMIN_PASSWORD=REPLACE_WITH_SECURE_GRAFANA_PASSWORD

# ============================================
# SECURITY FEATURES
# ============================================
# 2FA SMS (Twilio)
TWILIO_ACCOUNT_SID=REPLACE_WITH_TWILIO_ACCOUNT_SID
TWILIO_AUTH_TOKEN=REPLACE_WITH_TWILIO_AUTH_TOKEN
TWILIO_PHONE_NUMBER=REPLACE_WITH_TWILIO_PHONE_NUMBER

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info
LOG_FILE=/var/log/mpanel/mpanel.log

# ============================================
# VAULT (Optional - for secret management)
# ============================================
VAULT_ENABLED=false
# VAULT_ADDR=http://localhost:8200
# VAULT_TOKEN=REPLACE_WITH_VAULT_TOKEN
# VAULT_SECRET_PATH=secret/mpanel

# ============================================
# ADMIN USER (Initial Setup)
# ============================================
# Used to create first admin user on deployment
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=REPLACE_WITH_SECURE_ADMIN_PASSWORD
ADMIN_NAME=Admin User

# ============================================
# DOMAIN CONFIGURATION
# ============================================
# Your production domain names
DOMAIN_PANEL=panel.yourdomain.com
DOMAIN_API=api.yourdomain.com
DOMAIN_MONITORING=monitoring.yourdomain.com

# ============================================
# BACKUP CONFIGURATION
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=mpanel-backups
BACKUP_S3_REGION=us-east-1

# ============================================
# CDN & PERFORMANCE
# ============================================
# Cloudflare, CloudFront, etc.
CDN_ENABLED=false
# CDN_PROVIDER=cloudflare
# CLOUDFLARE_API_KEY=REPLACE_WITH_CLOUDFLARE_API_KEY
# CLOUDFLARE_EMAIL=REPLACE_WITH_CLOUDFLARE_EMAIL

# ============================================
# WEBHOOKS & INTEGRATIONS
# ============================================
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRY_ATTEMPTS=3

# ============================================
# KUBERNETES (if using K8s deployment)
# ============================================
KUBERNETES_ENABLED=false
# KUBERNETES_NAMESPACE=mpanel-production
# KUBERNETES_SERVICE_ACCOUNT=mpanel-sa

# ============================================
# SSL/TLS CERTIFICATES
# ============================================
# Let's Encrypt email for auto-renewal
SSL_EMAIL=admin@yourdomain.com
SSL_PROVIDER=letsencrypt

# ============================================
# DEBUGGING (Production)
# ============================================
# Set to 'false' in production unless troubleshooting
DEBUG=false
VERBOSE_LOGGING=false

# ============================================
# TIMEZONE & LOCALE
# ============================================
TZ=America/New_York
LOCALE=en-US

# ============================================
# SESSION CONFIGURATION
# ============================================
SESSION_SECRET=REPLACE_WITH_SECURE_SESSION_SECRET
SESSION_MAX_AGE=604800000

# ============================================
# PRODUCTION READY CHECKLIST
# ============================================
# [ ] All REPLACE_WITH_* values updated
# [ ] Stripe keys are LIVE (sk_live_*, pk_live_*)
# [ ] JWT_SECRET is 64+ random characters
# [ ] ENCRYPTION_KEY is exactly 32 characters
# [ ] Database credentials are secure
# [ ] Email SMTP configured and tested
# [ ] OpenAI API key added (for AI features)
# [ ] Grafana admin password changed
# [ ] Admin user credentials secure
# [ ] Domain names point to server IP
# [ ] SSL certificates ready (Let's Encrypt)
# [ ] Backup configuration verified
