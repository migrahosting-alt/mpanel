# mPanel Backend Environment Variables

# Server Configuration
NODE_ENV=development
PORT=3000
API_VERSION=v1

# Database
DATABASE_URL=postgresql://mpanel:mpanel@localhost:5433/mpanel
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_QUERY_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=10000
DATABASE_IDLE_TIMEOUT=30000

# Database Performance Monitoring
SLOW_QUERY_THRESHOLD_MS=1000
VERY_SLOW_QUERY_THRESHOLD_MS=5000
ENABLE_QUERY_LOGGING=false

# Advanced Optimizations
QUERY_CACHE_ENABLED=true
DETECT_N_PLUS_ONE=true
INDEX_ADVISOR_ENABLED=true
REQUEST_COALESCING_ENABLED=true
MEMORY_LEAK_DETECTION=true
HEAP_DUMP_PATH=./heap-dumps

# Worker Pool Configuration
WORKER_POOL_SIZE=0  # 0 = auto-detect (CPU cores - 1)
WORKER_MAX_QUEUE_SIZE=1000
WORKER_TIMEOUT=30000

# APM (Application Performance Monitoring)
APM_ENABLED=true
APM_SAMPLE_RATE=1.0
APM_CAPTURE_HEADERS=true
APM_CAPTURE_BODY=false
APM_SLOW_TRANSACTION_MS=1000
APM_SLOW_SPAN_MS=100

# Redis
REDIS_URL=redis://localhost:6380
REDIS_HOST=127.0.0.1
REDIS_PORT=6380
REDIS_SESSION_TTL=86400

# MinIO/S3
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=mpanel-assets

# JWT
JWT_SECRET=pteqlZZNz/Cg/lnaVPFPO9XqWTxq+GywEVV2WMNw/FuVIf3oZyvjUUEyqLPe+fUb
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# API Token for external provisioning (must match landing site)
MPANEL_API_TOKEN=2Yk03D3JZk6TFBjxb/zlo+j76Nh2uO2d/xj76jPa+zFXZgkF6bZJFV84z19YliOthakJqc9mWISMwr3BWTc+PA==7cad7372934b97719ba800ef8bdb80028bcf5e95f7ed8debb6c4ed1f8de056f3
49d1ff46a7833d8ca94fe33042d8d09ab7054edc50626cb545e3860e34f59df9

# Encryption
ENCRYPTION_KEY=62c630845687cc72e0e2c94d1c77340ac11f7ea5634130b944382d8256c5098f

Server_API_Token=ce2f922de667ed351b26ad9189fd26a6e9e89c902240a308d488327d0f88566f


# Payment Gateway (Stripe)
STRIPE_SECRET_KEY=sk_test_51RrtD0PwKgOrBJUA5IReSxljd7zwYMqth4GiMNBGHLidv4AeOu2H6dk0rliBN575qdHIo3NMZqQ0niJuPMoC6DSP00dnYa4Zcc
STRIPE_WEBHOOK_SECRET=whsec_8618da89145dd540f81828407ae913f57981e1206ccf10a646709a481c549a5f
GUARDIAN_AGENT_SHARED_SECRET=

# Tax Configuration
TAX_ENABLED=true
DEFAULT_TAX_RATE=0.10

# ICANN
ICANN_ENABLED=true
ICANN_FEE_PER_YEAR=0.18

# NameSilo Domain Registrar
NAMESILO_API_KEY=dbb5289e88744b950e72f
NAMESILO_SANDBOX=true
NAMESILO_API_URL=https://www.namesilo.com/api

# Email Configuration (SMTP)
SMTP_HOST=mail.migrahosting.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
SMTP_PASS=your-sendgrid-api-key-here
SMTP_FROM=MigraHosting <noreply@migrahosting.com>

# SendGrid (optional - alternative to SMTP_PASS)
SENDGRID_API_KEY=your-sendgrid-api-key-here

# Department Email Addresses
# Sales: sales@migrahosting.com - Sales inquiries, quotes, demos
# Billing: billing@migrahosting.com - Invoices, payments, renewals
# Support: support@migrahosting.com - Technical support, tickets (24/7)
# Info: info@migrahosting.com - General information, newsletters
# Student: student@migrahosting.com - Student program, educational discounts
# Admin: admin@migrahosting.com - System notifications, admin alerts
# Alerts: alerts@migrahosting.com - Security, downtime, usage alerts
# NOC: noc@migrahosting.com - Network operations, infrastructure monitoring (24/7)
# Abuse: abuse@migrahosting.com - Abuse reports, TOS violations (ICANN required)
# Legal: legal@migrahosting.com - Legal notices, GDPR, compliance
# Partnerships: partnerships@migrahosting.com - Reseller, affiliate, business development
# Careers: careers@migrahosting.com - Job applications, recruitment
EMAIL_SALES=sales@migrahosting.com
EMAIL_BILLING=billing@migrahosting.com
EMAIL_SUPPORT=support@migrahosting.com
EMAIL_INFO=info@migrahosting.com
EMAIL_STUDENT=student@migrahosting.com
EMAIL_ADMIN=admin@migrahosting.com
EMAIL_ALERTS=alerts@migrahosting.com
EMAIL_NOC=noc@migrahosting.com
EMAIL_ABUSE=abuse@migrahosting.com
EMAIL_LEGAL=legal@migrahosting.com
EMAIL_PARTNERSHIPS=partnerships@migrahosting.com
EMAIL_CAREERS=careers@migrahosting.com

# Email Features
EMAIL_TRACKING_ENABLED=true
EMAIL_FOOTER_UNSUBSCRIBE=true

# Monitoring
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
LOKI_URL=http://localhost:3100

# Vault (optional - disabled for development)
VAULT_ENABLED=false
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=root-token
VAULT_SECRET_PATH=secret/mpanel

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=http://localhost:3001

# Logging
LOG_LEVEL=info
LOG_FILE=logs/mpanel.log

# File Manager
FILE_ROOT=K:/MigraHosting/storage

# OpenAI Integration
OPENAI_API_KEY=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

# Application URL (for links in emails, webhooks, etc.)
APP_URL=https://panel.migrahosting.com

# Twilio SMS Integration (for 2FA and notifications)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Sentry Error Monitoring (optional, recommended for production)
SENTRY_DSN=https://your-sentry-dsn@o12345.ingest.sentry.io/67890
SENTRY_ENABLED=false
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
GIT_COMMIT=

# Error Alert System (emails admins on critical errors)
ERROR_ALERT_THRESHOLD=5
ERROR_ALERT_COOLDOWN=15
